<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Recherche</title></head>
<body>
<h1>Maa Dictionary</h1>

<form id="f">
    <label for="q"></label><input id="q" name="q" placeholder="word…" autofocus>
    <button>Search</button>
</form>

<ul id="out"></ul>

<script>
    document.getElementById('f').addEventListener('submit', async e => {
        e.preventDefault();
        const q = document.getElementById('q').value.trim();
        if (!q) return;
        const r = await fetch('/api/search?q=' + encodeURIComponent(q));
        const data = await r.json();
        const ul = document.getElementById('out');
        ul.innerHTML = '';
        data.forEach(() => {
            // Builds an <li> element for a single search result
            const createResultListItem = ({vocab, gloss}) => {
                const listItem = document.createElement('li');
                listItem.textContent = `${vocab} — ${gloss}`;
                return listItem;
            };

            document.getElementById('f').addEventListener('submit', async e => {
                e.preventDefault();
                const q = document.getElementById('q').value.trim();
                if (!q) return;

                const r = await fetch('/api/search?q=' + encodeURIComponent(q));
                const data = await r.json();

                const ul = document.getElementById('out');
                ul.innerHTML = '';

                data.forEach(item => ul.appendChild(createResultListItem(item)));
            });
        });
    });
</script>
</body>
</html>
